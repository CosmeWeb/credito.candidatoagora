<div id="container" class="container">
    <form id="frmvaga" action="<?php echo site_url('vaga/dadosdacontratante') ?>" method="POST">
        <input id="idvaga" name="idvaga" type="hidden" value="<?php echo $obj->idvaga; ?>">
        <input id="fasecadastro" name="fasecadastro" type="hidden" value="10">
        <div class="tituloconteudo">
            <h1><?php echo $obj->titulodavaga; ?></h1>
            <svg id="progress-steps" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="705" height="26" viewBox="0 0 705 26">
                <defs>
                    <linearGradient id="linear-gradient" x1="1" y1="1" x2="0" y2="1" gradientUnits="objectBoundingBox">
                    <stop offset="0" stop-color="#116cdd"/>
                    <stop offset="1" stop-color="#116cdd" stop-opacity="0"/>
                    </linearGradient>
                </defs>
                <g id="Group_2944" data-name="Group 2944" transform="translate(-670 -106)">
                    <g id="progress-steps" transform="translate(670 106)">
                    <g id="step3" transform="translate(420.819 -6)">
                        <g id="Ellipse" transform="translate(6.181 6)" fill="none" stroke="#a5a4bf" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                        </g>
                        <text id="_4" data-name="4" transform="translate(19.181 24)" fill="#a5a4bf" stroke="rgba(0,0,0,0)" stroke-miterlimit="10" stroke-width="1" font-size="16" font-family="SourceSansPro-Bold, Source Sans Pro" font-weight="700"><tspan x="-4.256" y="0">4</tspan></text>
                    </g>
                    <g id="step3-2" data-name="step3" transform="translate(164.819 -6)">
                        <g id="Ellipse-2" data-name="Ellipse" transform="translate(136.181 6)" fill="none" stroke="#a5a4bf" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                        </g>
                        <text id="_3" data-name="3" transform="translate(149.181 24)" fill="#a5a4bf" stroke="rgba(0,0,0,0)" stroke-miterlimit="10" stroke-width="1" font-size="16" font-family="SourceSansPro-Bold, Source Sans Pro" font-weight="700"><tspan x="-4.256" y="0">3</tspan></text>
                    </g>
                    <g id="step3-3" data-name="step3" transform="translate(503.819 -6)">
                        <g id="Ellipse-3" data-name="Ellipse" transform="translate(49.181 6)" fill="#116cdd" stroke="#116cdd" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                        </g>
                        <text id="_5" data-name="5" transform="translate(62.181 24)" fill="#fff" stroke="rgba(0,0,0,0)" stroke-miterlimit="10" stroke-width="1" font-size="16" font-family="SourceSansPro-Bold, Source Sans Pro" font-weight="700"><tspan x="-4.256" y="0">5</tspan></text>
                    </g>
                    <g id="step3-4" data-name="step3" transform="translate(168.603 -6)">
                        <g id="Ellipse-4" data-name="Ellipse" transform="translate(6.397 6)" fill="none" stroke="#a5a4bf" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                        </g>
                        <text id="_2" data-name="2" transform="translate(19.397 24)" fill="#a5a4bf" stroke="rgba(0,0,0,0)" stroke-miterlimit="10" stroke-width="1" font-size="16" font-family="SourceSansPro-Bold, Source Sans Pro" font-weight="700"><tspan x="-4.256" y="0">2</tspan></text>
                    </g>
                    <g id="step3-5" data-name="step3" transform="translate(43.001 -6)">
                        <g id="Ellipse-5" data-name="Ellipse" transform="translate(5.999 6)" fill="none" stroke="#a5a4bf" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                        </g>
                        <text id="_1" data-name="1" transform="translate(18.999 24)" fill="#a5a4bf" font-size="16" font-family="SourceSansPro-Bold, Source Sans Pro" font-weight="700"><tspan x="-4.256" y="0">1</tspan></text>
                    </g>
                    <g id="step4" transform="translate(673 -6)">
                        <g id="Ellipse-6" data-name="Ellipse" transform="translate(6 6)" fill="none" stroke="#a5a4bf" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                        </g>
                        <text id="_6" data-name="6" transform="translate(19 24)" fill="#a5a4bf" stroke="rgba(0,0,0,0)" stroke-miterlimit="10" stroke-width="1" font-size="16" font-family="SourceSansPro-Bold, Source Sans Pro" font-weight="700"><tspan x="-4.256" y="0">6</tspan></text>
                    </g>
                    <rect id="Rectangle_1763" data-name="Rectangle 1763" width="100" height="2" transform="translate(75 12)" fill="#116cdd"/>
                    <rect id="Rectangle_1767" data-name="Rectangle 1767" width="49" height="2" transform="translate(0 12)" fill="url(#linear-gradient)"/>
                    <rect id="Rectangle_1765" data-name="Rectangle 1765" width="100" height="2" transform="translate(327 12)" fill="#116cdd"/>
                    <rect id="Rectangle_2042" data-name="Rectangle 2042" width="100" height="2" transform="translate(201 12)" fill="#116cdd"/>
                    <rect id="Rectangle_1766" data-name="Rectangle 1766" width="100" height="2" transform="translate(453 12)" fill="#116cdd"/>
                    <rect id="Rectangle_2043" data-name="Rectangle 2043" width="100" height="2" transform="translate(579 12)" fill="#116cdd"/>
                    </g>
                    <g id="progress-completed" transform="translate(971 106)">
                    <g id="Ellipse-7" data-name="Ellipse" fill="#f0f0f7" stroke="#116cdd" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                    </g>
                    <path id="Path_294" data-name="Path 294" d="M1187.471,717.879l4.9,4.833,8.407-8.4" transform="translate(-1181 -705)" fill="none" stroke="#116cdd" stroke-width="2"/>
                    </g>
                    <g id="progress-completed-2" data-name="progress-completed" transform="translate(845 106)">
                    <g id="Ellipse-8" data-name="Ellipse" fill="#f0f0f7" stroke="#116cdd" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                    </g>
                    <path id="Path_294-2" data-name="Path 294" d="M1187.471,717.879l4.9,4.833,8.407-8.4" transform="translate(-1181 -705)" fill="none" stroke="#116cdd" stroke-width="2"/>
                    </g>
                    <g id="progress-completed-3" data-name="progress-completed" transform="translate(1097 106)">
                    <g id="Ellipse-9" data-name="Ellipse" fill="#f0f0f7" stroke="#116cdd" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                    </g>
                    <path id="Path_294-3" data-name="Path 294" d="M1187.471,717.879l4.9,4.833,8.407-8.4" transform="translate(-1181 -705)" fill="none" stroke="#116cdd" stroke-width="2"/>
                    </g>
                    <g id="progress-completed-4" data-name="progress-completed" transform="translate(1223 106)">
                    <g id="Ellipse-10" data-name="Ellipse" fill="#f0f0f7" stroke="#116cdd" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                    </g>
                    <path id="Path_294-4" data-name="Path 294" d="M1187.471,717.879l4.9,4.833,8.407-8.4" transform="translate(-1181 -705)" fill="none" stroke="#116cdd" stroke-width="2"/>
                    </g>
                    <g id="progress-completed-5" data-name="progress-completed" transform="translate(1349 106)">
                    <g id="Ellipse-11" data-name="Ellipse" fill="#f0f0f7" stroke="#116cdd" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                    </g>
                    <path id="Path_294-5" data-name="Path 294" d="M1187.471,717.879l4.9,4.833,8.407-8.4" transform="translate(-1181 -705)" fill="none" stroke="#116cdd" stroke-width="2"/>
                    </g>
                    <g id="progress-completed-6" data-name="progress-completed" transform="translate(719 106)">
                    <g id="Ellipse-12" data-name="Ellipse" fill="#f0f0f7" stroke="#116cdd" stroke-width="2">
                        <circle cx="13" cy="13" r="13" stroke="none"/>
                        <circle cx="13" cy="13" r="12" fill="none"/>
                    </g>
                    <path id="Path_294-6" data-name="Path 294" d="M1187.471,717.879l4.9,4.833,8.407-8.4" transform="translate(-1181 -705)" fill="none" stroke="#116cdd" stroke-width="2"/>
                    </g>
                </g>
            </svg>
        </div>
        <div class="painel">
            <div class="topo">
                <h2>TÃ­tulo da vaga</h2> 
                <a href="<?php echo site_url('vaga/dadosdavagaexpectativa/'.$obj->idvaga); ?>"> Editar <i class="ion ion-compose"></i></a>
            </div>
            <div class="corpo">
                <div class="resumo">
                    <div class="label">
                        TÃ­tulo da vaga
                    </div> 
                    <div class="value">
                        <?php echo $obj->titulodavaga; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        VocÃª pretende contratar o candidato para esta vaga
                    </div> 
                    <div class="value">
                        <?php echo $obj->tempocontratacao; ?>
                    </div>
                </div>
            </div>
        </div>
        <div class="painel">
            <div class="topo">
                <h2>Dados da contratante</h2> 
                <a href="<?php echo site_url('vaga/dadosdacontratante/'.$obj->idvaga); ?>"> Editar <i class="ion ion-compose"></i></a>
            </div>
            <div class="corpo">
                <div class="resumo">
                    <div class="label">
                        Nome da empresa contratante?
                    </div> 
                    <div class="value">
                        <?php echo $obj->empresacontratante; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Setor de atuaÃ§Ã£o
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetSetor(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Quantidade de funcionÃ¡rios
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetTamanho(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Atual nÃ­vel de faturamento anual da empresa?
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetFaturamento(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Como vocÃª entende o momento atual da sua empresa?
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetMomentoAtualEmpresa(); ?>
                    </div>
                </div>
            </div>
        </div>
        <div class="painel">
            <div class="topo">
                <h2>InformaÃ§Ãµes sobre a vaga</h2> 
                <a href="<?php echo site_url('vaga/dadosdavaga/'.$obj->idvaga); ?>"> Editar <i class="ion ion-compose"></i></a>
            </div>
            <div class="corpo">
                <div class="resumo">
                    <div class="label">
                        Ãrea
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetArea(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        NÃ­vel
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetNivel(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Subarea
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetSubarea(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Cargos correlatos existentes no mercado
                    </div> 
                    <div class="value" id="areacargo">
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Linha de reporte
                    </div> 
                    <div class="value">
                        <?php echo $obj->linhadereporte; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Faixa de remuneraÃ§Ã£o
                    </div> 
                    <div class="value">
                        <?php echo $obj->FaixaDeRemuneracao(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        DescriÃ§Ã£o da vaga
                    </div> 
                    <div class="value">
                        <?php echo $obj->descricaodavaga; ?>
                    </div>
                </div>
                <div class="resumo" style="display: none;">
                    <div class="label">
                    CompetÃªncias essenciais ou desejÃ¡veis
                    </div> 
                    <div class="value" id="listacompetencias">
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        A vaga Ã© remoto
                    </div> 
                    <div class="value">
                        <?php echo $obj->remoto; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Estado
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetEstado(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Cidade
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetCidade(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Candidatos no raio de 
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetRaiodePesquisa(); ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Mobilidade 
                    </div> 
                    <div class="value">
                        <?php echo $obj->GetMobilidade(); ?>
                    </div>
                </div>
            </div>
        </div>
        <div class="painel">
            <div class="topo">
                <h2>Quais tipos de empresas vocÃª gostaria que o candidato ideal esteja trabalhando ou tenha trabalhado anteriormente?</h2> 
                <a href="<?php echo site_url('vaga/dadosdacandidato/'.$obj->idvaga); ?>"> Editar <i class="ion ion-compose"></i></a>
            </div>
            <div class="corpo">
                <div class="resumo">
                    <div class="label">
                        Nacionalidade das empresas nas quais o profissional trabalhou?
                    </div> 
                    <div class="value">
                        <?php echo $obj->nacionalidadeempresasprofissionaltrabalhou; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Considerar apenas empresas listadas nas 1.000 maiores empresas no Brasil?
                    </div> 
                    <div class="value">
                        <?php echo $obj->melhores1000empresa; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Considerar apenas empresas listadas na bolsa?
                    </div> 
                    <div class="value">
                        <?php echo $obj->listadaembolsa; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Considerar apenas empresas premiadas pelo GPTW (Great Place To Work)?
                    </div> 
                    <div class="value">
                        <?php echo $obj->gptw; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Considerar apenas empresas do prÃªmio inovaÃ§Ã£o?
                    </div> 
                    <div class="value">
                        <?php echo $obj->perfilinovacao; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Considerar apenas startups?
                    </div> 
                    <div class="value">
                        <?php echo $obj->startup; ?>
                    </div>
                </div>
            </div>
        </div>
        <div class="painel">
            <div class="topo">
                <h2>Setores target para <b>incluir</b> na busca</h2> 
                <a href="<?php echo site_url('vaga/dadosdavagasetor/'.$obj->idvaga); ?>"> Editar <i class="ion ion-compose"></i></a>
            </div>
            <div class="corpo">
                <ul id="areasetores">
                </ul>
            </div>
        </div>
        <div class="painel">
            <div class="topo">
                <h2>Empresas target para <b>incluir</b> na busca</h2>
                <?php 
                if($obj->selecionarempresas == "Sim"):
                ?>
                <a href="<?php echo site_url('vaga/dadosdavagaautoempresa/'.$obj->idvaga); ?>"> Editar <i class="ion ion-compose"></i></a>
                <?php
                else:
                ?>
                <a href="<?php echo site_url('vaga/dadosdavagaselectempresa/'.$obj->idvaga); ?>"> Editar <i class="ion ion-compose"></i></a>
                <?php
                endif;
                ?>                
            </div>
            <div class="corpo">
                <?php 
                if($obj->selecionarempresas == "Sim"):
                ?>
                    <div id="EmpresaAuto">
                        <img src="<?php echo base_url('assets/img/sistema/icone_autoempresas.png') ?>"/>
                        <div>
                            VocÃª optou pela seleÃ§Ã£o de empresas feita com ajuda dos nossos especialistas!
                        </div>
                    </div>
                <?php
                else:
                ?>
                <div id="contenersetores">
                </div>
                <div class="resumo">
                    <div class="label">
                        Considerar outras empresas fora das opÃ§Ãµes acima marcadas, mas do mesmo setor identificado com target?
                    </div> 
                    <div class="value">
                        <?php echo $obj->incluirempresasforatarget; ?>
                    </div>
                </div>
                <div class="resumo">
                    <div class="label">
                        Outras empresas fora das opÃ§Ãµes acima marcadas.
                    </div> 
                    <div class="value" id="listaempresa">
                    </div>
                </div>
                <?php
                endif;
                ?>
                <div class="resumo">
                    <div class="label">
                        Excluir candidatos que jÃ¡ tenham trabalhado na empresa contratante no passado?
                    </div> 
                    <div class="value">
                        <?php echo $obj->excluirprofissionaisjatrabalhouempresa; ?>
                    </div>
                </div>
            </div>
        </div>        
        <div class="painel">
            <div class="topo">
                <h2>Empresas target para <b>excluir</b> da busca</h2> 
                <a href="<?php echo site_url('vaga/dadosdavagaempresaexcluir/'.$obj->idvaga); ?>"> Editar <i class="ion ion-compose"></i></a>
            </div>
            <div class="corpo">
                <div id="contenersetoresexcluir">
                </div>
            </div>
        </div>
        <div id="dadosformrodape" class="rodapeconteudo resumo">
            <div class="area-btn">
                <a href="<?php echo site_url('vaga/dadosdashboard/'.$obj->idvaga); ?>" class="btn-dashboard">
                <i class="fa fa-th"></i>
                Voltar ao dashboard da vaga
                </a>
                <a href="<?php echo site_url("vaga/pdf_vaga/{$obj->idvaga}"); ?>" target="_blank" class="btn-PDF">Visualizar PDF <i class="far fa-file-pdf"></i></a>
                <a href="javascript:;" class="btn-Confirmar" data-codigo="CadVagaConcluido" data-vaga="<?php echo $obj->idvaga; ?>" onclick="SalvarVaga()">Confirmar e cadastrar a vaga <i class="fas fa-check"></i></a>
            </div>
        </div>
    </form>
</div>

<div id="OcultarSetor" style="display: none;">
<!--
<div id="boxsetor{idsetor}" class="resumo">
    <div class="label">
    {setor}
    </div> 
    <div class="value">
    </div>
</div>
-->
</div>
<div id="OcultarSetorExcluir" style="display: none;">
<!--
<div id="boxsetorexcluir{idsetor}" class="resumo">
    <div class="label">
    {setor}
    </div> 
    <div class="value">
    </div>
</div>
-->
</div>
<script>
    var templatesetor = null;
    var templatesetorexcluir = null;
    function CarregarMaisCargo(posicao = 0, total = 0)
    {
        let url = GetUrlAcao("api","carregarmaiscargoscorrelato");
        let data = null;
        data = {
            "posicao": posicao,
            "total": total,
            "idvaga": $("#idvaga").val(),
        }    
        $.ajax({
            url: url,
            method:'POST',
            data:data,
            success:function(data){
                if(data.sucesso)
                {
                    if(!Vazio(data.lista))
                    {
                        let html = "";
                        for(let i = 0; i < data.lista.length; i++)
                        {                            
                            if((posicao == 0)&&(i == 0))
                            {
                                html = data.lista[i].cargo;
                            }
                            else
                            {
                                html = ", " + data.lista[i].cargo;
                            }
                            $("#areacargo").append(html);
                        }
                    }
                    if(!data.finalizar)
                    {
                        CarregarMaisCargo(data.posicao, data.total);
                    }
                }
            },
            error: function(XHR, textStatus, errorThrown){
                msn = "Falha ao buscar lista de cargo correlato.";
                MsnDanger("Erro", msn);
            }
        });
    }    
    function CarregarMaisSetor(posicao = 0, total = 0)
    {
        let url = GetUrlAcao("api","carregarmaissetores");
        let data = null;
        data = {
            "posicao": posicao,
            "total": total,
            "idvaga":$("#idvaga").val(),
            "somarcado": 1
        }    
        $.ajax({
            url: url,
            method:'POST',
            data:data,
            success:function(data){
                if(data.sucesso)
                {
                    if(!Vazio(data.lista))
                    {
                        let html = "";
                        for( let i = 0; i < data.lista.length; i++)
                        {
                            html = "<li>" + data.lista[i].setor + "</li>";
                            $("#areasetores").append(html);
                        }
                    }
                    if(!data.finalizar)
                    {
                        CarregarMaisSetor(data.posicao, data.total);
                    }                    
                }
            },
            error: function(XHR, textStatus, errorThrown){
                msn = "Falha ao buscar lista de setores.";
                MsnDanger("Erro", msn);
            }
        });
    }    
    function CarregarMaisEmpresaCorrelata(posicao = 0, total = 0)
    {
        let url = GetUrlAcao("api","carregarmaisempresascorrelata");
        let data = null;
        data = {
            "posicao": posicao,
            "total": total,
            "idvaga": $("#idvaga").val(),
        }    
        $.ajax({
            url: url,
            method:'POST',
            data:data,
            success:function(data){
                if(data.sucesso)
                {
                    if(!Vazio(data.lista))
                    {
                        let html = "";
                        for(let i = 0; i < data.lista.length; i++)
                        {                            
                            if((posicao == 0)&&(i == 0))
                            {
                                html = data.lista[i].empresa;
                            }
                            else
                            {
                                html = ", " + data.lista[i].empresa;
                            }
                            $("#listaempresa").append(html);
                        }
                    }
                    if(!data.finalizar)
                    {
                        CarregarMaisEmpresaCorrelata(data.posicao, data.total);
                    }
                }
            },
            error: function(XHR, textStatus, errorThrown){
                msn = "Falha ao buscar lista de cidade.";
                MsnDanger("Erro", msn);
            }
        });
    }
    function CarregarMaisCompetenciaCorrelata(posicao = 0, total = 0)
    {
        let url = GetUrlAcao("api","carregarmaiscompetenciacorrelata");
        let data = null;
        data = {
            "posicao": posicao,
            "total": total,
            "idvaga": $("#idvaga").val(),
        }    
        $.ajax({
            url: url,
            method:'POST',
            data:data,
            success:function(data){
                if(data.sucesso)
                {
                    if(!Vazio(data.lista))
                    {
                        let html = "";
                        for(let i = 0; i < data.lista.length; i++)
                        {                            
                            if((posicao == 0)&&(i == 0))
                            {
                                html = data.lista[i].competencia;
                            }
                            else
                            {
                                html = ", " + data.lista[i].competencia;
                            }
                            $("#listacompetencias").append(html);
                        }
                    }
                    if(!data.finalizar)
                    {
                        CarregarMaisCompetenciaCorrelata(data.posicao, data.total);
                    }
                }
            },
            error: function(XHR, textStatus, errorThrown){
                msn = "Falha ao buscar lista de cidade.";
                MsnDanger("Erro", msn);
            }
        });
    }
    function CarregarMaisEmpresa(posicao = 0, total = 0)
    {
        let url = GetUrlAcao("api","carregarmaisempresas");
        let data = null;
        data = {
            "posicao": posicao,
            "total": total,
            "idvaga": $("#idvaga").val(),
            "somarcado": 1
        }    
        $.ajax({
            url: url,
            method:'POST',
            data:data,
            success:function(data){
                if(data.sucesso)
                {
                    if(!Vazio(data.lista))
                    {
                        for( let i = 0; i < data.lista.length; i++)
                        {
                            AdicionarEmpresa(data.lista[i]);
                        }
                    }
                    if(!data.finalizar)
                    {
                        CarregarMaisEmpresa(data.posicao, data.total);
                    }
                }
            },
            error: function(XHR, textStatus, errorThrown){
                msn = "Falha ao buscar lista de cidade.";
                MsnDanger("Erro", msn);
            }
        });
    }
    function CarregarMaisEmpresaExcluir(posicao = 0, total = 0)
    {
        let url = GetUrlAcao("api","carregarmaisempresasexcluir");
        let data = null;
        data = {
            "posicao": posicao,
            "total": total,
            "idvaga": $("#idvaga").val(),
            "somarcado": 1
        }    
        $.ajax({
            url: url,
            method:'POST',
            data:data,
            success:function(data){
                if(data.sucesso)
                {
                    if(!Vazio(data.lista))
                    {
                        for( let i = 0; i < data.lista.length; i++)
                        {
                            AdicionarEmpresaExcluir(data.lista[i]);
                        }
                    }
                    if(!data.finalizar)
                    {
                        CarregarMaisEmpresaExcluir(data.posicao, data.total);
                    }
                }
            },
            error: function(XHR, textStatus, errorThrown){
                msn = "Falha ao buscar lista de empresa.";
                MsnDanger("Erro", msn);
            }
        });
    }
    function GetTemplateSetor()
    {    
		if(Vazio(templatesetor))
        {
            templatesetor = $("#OcultarSetor").html();
        }
        return templatesetor;
    }
    function GetTemplateSetorExcluir()
    {    
		if(Vazio(templatesetorexcluir))
        {
            templatesetorexcluir = $("#OcultarSetorExcluir").html();
        }
        return templatesetorexcluir;
    }
    function AdicionarSetor(setor = null)
    {
        let obj = $("#contenersetores");        
		if(Vazio(setor))
        {
            return;
        }
        let caixa = GetTemplateSetor();
        caixa = caixa.replaceAll("<!--", "");
		caixa = caixa.replaceAll("-->", "");
        caixa = caixa.replaceAll("{idsetor}", setor.idsetor);
        caixa = caixa.replaceAll("{setor}", setor.setor);
        obj.append(caixa);
    }
    function AdicionarEmpresa(empresa = null)
    {      
		if(Vazio(empresa))
        {
            return;
        }
        if(Vazio(empresa.idsetor))
        {
            return;
        }
        let obj = $("#contenersetores #boxsetor"+empresa.idsetor+" .value");
        let primeiro = false;
        let html = "";
        if(Vazio(obj))
        {
            AdicionarSetor(empresa);
            obj = $("#contenersetores #boxsetor"+empresa.idsetor+" .value");
            primeiro = true;
        }

        if(primeiro)
            html = empresa.empresa;
        else
            html = ", " + empresa.empresa;
        obj.append(html);
    }
    function AdicionarSetorExcluir(setor = null)
    {
        let obj = $("#contenersetoresexcluir");        
		if(Vazio(setor))
        {
            return;
        }
        let caixa = GetTemplateSetorExcluir();
        caixa = caixa.replaceAll("<!--", "");
		caixa = caixa.replaceAll("-->", "");
        caixa = caixa.replaceAll("{idsetor}", setor.idsetor);
        caixa = caixa.replaceAll("{setor}", setor.setor);
        obj.append(caixa);
    }
    function AdicionarEmpresaExcluir(empresa = null)
    {      
		if(Vazio(empresa))
        {
            return;
        }
        if(Vazio(empresa.idsetor))
        {
            return;
        }
        let obj = $("#contenersetoresexcluir #boxsetorexcluir"+empresa.idsetor+" .value");
        let primeiro = false;
        let html = "";
        if(Vazio(obj))
        {
            AdicionarSetorExcluir(empresa);
            obj = $("#contenersetoresexcluir #boxsetorexcluir"+empresa.idsetor+" .value");
            primeiro = true;
        }

        if(primeiro)
            html = empresa.empresa;
        else
            html = ", " + empresa.empresa;
        obj.append(html);
    }
    $(function() {
        CarregarMaisCargo( 0, 0);
        CarregarMaisSetor( 0, 0);
        CarregarMaisEmpresaCorrelata( 0, 0);
        CarregarMaisCompetenciaCorrelata( 0, 0);
        CarregarMaisEmpresa( 0, 0);
        CarregarMaisEmpresaExcluir( 0, 0);
    });
</script>

